import{r as a,j as e,H as v,a as b}from"./app-8z-bSAUp.js";import{A as u}from"./AuthenticatedLayout-BmXeG_Y8.js";import"./ApplicationLogo-RcO5BWnm.js";import"./transition-QHAPl4Y-.js";const f=({event:r})=>{const[n,c]=a.useState(!1),x=t=>new Date(t).toLocaleString();return e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-4",children:[e.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer hover:bg-gray-50",onClick:()=>c(!n),children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r.event||"Unknown Event"}),e.jsx("p",{className:"text-sm text-gray-500",children:x(r.created_at)})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform ${n?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded overflow-auto max-h-96",children:JSON.stringify(r.payload,null,2)})})]})};function E(){const[r,n]=a.useState([]),[c,x]=a.useState(!0),[t,h]=a.useState(1),[i,g]=a.useState(1),[l,p]=a.useState(!0),d=async(s=1)=>{try{const o=await b.get(`/api/bbb/events?page=${s}`);n(o.data.data),g(o.data.last_page)}catch(o){console.error("Error fetching events:",o)}finally{x(!1)}};a.useEffect(()=>{d(t);let s;return l&&(s=setInterval(()=>{d(t)},1e4)),()=>{s&&clearInterval(s)}},[t,l]);const m=s=>{s>=1&&s<=i&&(h(s),d(s))};return c?e.jsx(u,{children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"text-center",children:"Loading events..."})})})}):e.jsxs(u,{children:[e.jsx(v,{title:"BBB Events"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6",children:e.jsxs("div",{className:"p-6 bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"BigBlueButton Events"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>p(!l),className:`px-4 py-2 text-sm font-medium rounded-md ${l?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:l?"Live: ON":"Live: OFF"}),e.jsx("button",{onClick:()=>d(t),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Refresh"})]})]}),r.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No events found."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsx(f,{event:s},s.id))}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{onClick:()=>m(t-1),disabled:t===1,className:`px-4 py-2 text-sm font-medium rounded-md ${t===1?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,children:"Previous"}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Page ",t," of ",i]}),e.jsx("button",{onClick:()=>m(t+1),disabled:t>=i,className:`px-4 py-2 text-sm font-medium rounded-md ${t>=i?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,children:"Next"})]})]})]})})})})]})}export{E as default};
